@(title: String, user: User, corpora: List[Corpus])(implicit flash: play.api.mvc.Flash)

@styles = {
	<style>
		.modal-vertical-centered {
			transform: translate(0, 50%) !important;
			-ms-transform: translate(0, 50%) !important; /* IE 9 */
			-webkit-transform: translate(0, 50%) !important; /* Safari and Chrome */
		}	
	</style>
}

@scripts = {
	<script type="text/javascript">
		$(document).ready(function() {
			$('button[name="delete_corpus"]').on('click', function(e){
			    var $form = $(this).closest('form'); 
			    e.preventDefault();
			    $('#confirmCorpus').modal('show')
			        .on('click', '#deleteCorpus', function() {
			        	console.log('delete');
			            $form.trigger('submit'); // submit the form
			        });
			});
		});
		
	</script>
}

@main(title, styles, scripts, user) {

	@flash.get("success").map { message =>
		<div class="alert alert-success">
			@message
		</div>
	}
	<h1>@title</h1>
		
	@if(user != null) {
        <table class="table table-condensed">
			@for(corpus <- corpora) {
				<tr>
	               	<td>
              			@(corpus.name) @(corpus.description)
              			<ul>
              				@for(resource <- corpus.resources) {
              					<li>@(resource.id) @(resource.resource_id)</li>
              				}
              			</ul>
	               	</td>
	               	<td>
						@helper.form(routes.Account.deleteCorpus(corpus.id)) {
              		    	<button type="button" data-dismiss="modal" class="btn btn-danger" name="delete_corpus">Delete</button>
						}
					</td>	       		
				</tr>
	        }
		</table>	    
		<div id="confirmCorpus" class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-vertical-centered">
		    	<div class="modal-content">
		  			<div class="modal-body">
		    			Are you sure?
		  			</div>
		  			<div class="modal-footer">
					    <button type="button" data-dismiss="modal" class="btn btn-danger" id="deleteCorpus">Delete</button>
					    <button type="button" data-dismiss="modal" class="btn">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	}
	
}

