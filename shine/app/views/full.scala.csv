@(title: String, user: User, q: uk.bl.wa.shine.Query)@formatDate(dateText: Object) = @{if (dateText != null) {var dateValue = dateText.toString; var formatter: java.text.DateFormat = new java.text.SimpleDateFormat("E MMM dd HH:mm:ss Z yyyy"); var date = formatter.parse(dateValue); val newDate = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date); newDate;} else { ""; } } @for((d, index) <- q.res.getResults().zipWithIndex) {"@d.getFirstValue("title")","@d.getFirstValue("host")","@d.getFirstValue("public_suffix")","@d.getFirstValue("crawl_year")","@d.getFirstValue("content_type_norm")","@d.getFirstValue("content_language")","@formatDate(d.getFirstValue("crawl_date"))","http://web.archive.org/web/@(d.getFirstValue("wayback_date"))/@(d.getFirstValue("url"))" 
}
