@(title: String, user: User, searches: List[Search])(implicit flash: play.api.mvc.Flash)

@styles = {
	<style>
		.modal-vertical-centered {
			transform: translate(0, 50%) !important;
			-ms-transform: translate(0, 50%) !important; /* IE 9 */
			-webkit-transform: translate(0, 50%) !important; /* Safari and Chrome */
		}	
	</style>
}

@scripts = {
	<script type="text/javascript">
		$(document).ready(function() {
			$('button[name="delete_search"]').on('click', function(e){
			    var $form = $(this).closest('form'); 
			    e.preventDefault();
			    $('#confirm').modal('show')
			        .on('click', '#delete', function() {
			            $form.trigger('submit'); // submit the form
			        });
			});
		});
		
	</script>
}

@main(title, styles, scripts, user) {

	@flash.get("success").map { message =>
		<div class="alert alert-success">
			@message
		</div>
	}
	<h1>@title</h1>
		
	@if(user != null) {
	    <article  class="search">
	        <ol class="list">
				@for(search <- searches) {
					@helper.form(routes.Account.deleteSearch(search.id)) {
		               	<li>
		               		<div class="pull-left">
		               			@(search.name)
		               		</div>
		               		<div class="pull-right">
		               		    <button type="button" data-dismiss="modal" class="btn btn-danger" name="delete_search">Delete</button>
		               		</div>
		               		<br/>
		               		<ul>
		               			<a href="../@(search.url)">
		               				@Html(search.summary)
		               			</a>
		               		</ul>
		               	</li>
					}
		        }
	        </ol>
	    </article>
	    
		<div id="confirm" class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-vertical-centered">
		    	<div class="modal-content">
		  			<div class="modal-body">
		    			Are you sure?
		  			</div>
		  			<div class="modal-footer">
					    <button type="button" data-dismiss="modal" class="btn btn-danger" id="delete">Delete</button>
					    <button type="button" data-dismiss="modal" class="btn">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	}
	
}

